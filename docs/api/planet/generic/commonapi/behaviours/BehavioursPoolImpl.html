<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_05) on Wed Jul 20 11:32:53 CEST 2005 -->
<TITLE>
BehavioursPoolImpl (PlanetSim)
</TITLE>

<META NAME="keywords" CONTENT="planet.generic.commonapi.behaviours.BehavioursPoolImpl class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="BehavioursPoolImpl (PlanetSim)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BehavioursPoolImpl.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPatternImpl.html" title="class in planet.generic.commonapi.behaviours"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPropertiesImpl.html" title="class in planet.generic.commonapi.behaviours"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BehavioursPoolImpl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
planet.generic.commonapi.behaviours</FONT>
<BR>
Class BehavioursPoolImpl</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by"><B>planet.generic.commonapi.behaviours.BehavioursPoolImpl</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../planet/commonapi/behaviours/BehavioursPool.html" title="interface in planet.commonapi.behaviours">BehavioursPool</A>, java.io.Serializable</DD>
</DL>
<HR>
<DL>
<DT>public class <B>BehavioursPoolImpl</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../planet/commonapi/behaviours/BehavioursPool.html" title="interface in planet.commonapi.behaviours">BehavioursPool</A></DL>

<P>
The BehavioursPool's class is aimed at providing an internal  scheduler of
 node's behaviuours. At startup, behaviours are registered to the pool from 
 Behaviour.properties file, following the next syntax:
 <br><pre>    
      Class = Type, Mode, Probability, When, Role 
 </pre>
 Then, a message interceptor is build up and is ready to invoke  behaviours
 when a message pattern matches to those provided by <b> Behaviour.properties </b>
 file.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD><a href="mailto: marc.sanchez@urv.net">Marc Sanchez</a>, <a href="mailto: jordi.pujol@estudiants.urv.es">Jordi Pujol</a>
 Date: 10/10/2004</DD>
<DT><B>See Also:</B><DD><A HREF="../../../../serialized-form.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl">Serialized Form</A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Vector[][]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#beh">beh</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BehavioursPool properties: mapping from <b>patterns</b> to <b>behaviours</b>.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#BEH_MAPPINGS">BEH_MAPPINGS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total number of Behaviour's Queue: 
 <ol type="1" start="0">
 Good and Local  Behaviours
 Good and Remote Behaviours
 Bad  and Local  Behaviours
 Bad  and Remote Behaviours
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#behaviours">behaviours</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auxiliar Vector to use in the onMessage() method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Iterator</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#behIt">behIt</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auxiliar Iterator to use in the onMessage() method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#behSlots">behSlots</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of behaviour's slots: numberTypes * numberModes;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../planet/commonapi/behaviours/BehavioursFilter.html" title="interface in planet.commonapi.behaviours">BehavioursFilter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#filter">filter</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Filter instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#NULL_MASK">NULL_MASK</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Lack Of Neutral and Always Mask.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#ROLE_BAD">ROLE_BAD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Bad modifier for Behaviour's role. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#ROLE_GOOD">ROLE_GOOD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Good modifier for Behaviour's role. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#ROLE_NEUTRAL_MASK">ROLE_NEUTRAL_MASK</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Neutral modifier applied to a behaviour ignores the
 distinction between local or remote traffic handled by a node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#TRAFFIC_ALWAYS_MASK">TRAFFIC_ALWAYS_MASK</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Always modifier applied to a behaviour ignores the
 distinction between local or remote traffic handled by a node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#TRAFFIC_LOCAL">TRAFFIC_LOCAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Local modifier applied to a behaviour means it only will
 be scheduled when a RouteMessage has as destination the local node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#TRAFFIC_REMOTE">TRAFFIC_REMOTE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaviour's Property: Remote modifier applied to a behaviour means it only will
 be scheduled when a RouteMessage has as destination a remote node and needs to
 be rerouted trough the overlay again.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#BehavioursPoolImpl()">BehavioursPoolImpl</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Builds a non initialized pool. </TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#build(java.util.Vector)">build</A></B>(java.util.Vector&nbsp;patterns)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the patterns sorted from more-to-less specific as input,
 builds a mapping from RouteMessage's patterns to behaviours.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#onMessage(planet.commonapi.RouteMessage, planet.commonapi.Node)">onMessage</A></B>(<A HREF="../../../../planet/commonapi/RouteMessage.html" title="interface in planet.commonapi">RouteMessage</A>&nbsp;msg,
          <A HREF="../../../../planet/commonapi/Node.html" title="interface in planet.commonapi">Node</A>&nbsp;node)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a RouteMessage and a Node as input, onMessage's method intends to
 invoke some behaviours only if RouteMessage's type and mode fields matches
 some behaviour's pattern.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#prettyPrintAll()">prettyPrintAll</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#printMap(int)">printMap</A></B>(int&nbsp;queue)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#setPattern(int, int, java.lang.String, planet.generic.commonapi.behaviours.BehavioursPatternImpl)">setPattern</A></B>(int&nbsp;queue,
           int&nbsp;typePos,
           java.lang.String&nbsp;modeOf,
           <A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPatternImpl.html" title="class in planet.generic.commonapi.behaviours">BehavioursPatternImpl</A>&nbsp;pattern)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the initial position for type on mapping <b>typePos</b> and <b>mode</b> as input, sets the 
 pattern on the mapping taking into account the grammar tree extracted from wildcards semantics.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPoolImpl.html#whichQueues(int, int, int)">whichQueues</A></B>(int&nbsp;Mask,
            int&nbsp;RoleOf,
            int&nbsp;WhenTo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The WhichQueue's method selects for a given pattern what Queues must
 include a copy of the current behaviour.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="beh"><!-- --></A><H3>
beh</H3>
<PRE>
protected java.util.Vector[][] <B>beh</B></PRE>
<DL>
<DD>BehavioursPool properties: mapping from <b>patterns</b> to <b>behaviours</b>.
 <ul>
 <li>Patterns are composed by: Type and Mode, for example: 
 					"QUERY_JOIN" and "REQUEST" related to the available
     RouteMessage types and modes. </li>
 <li>Types: The available RouteMessage types. Correct range in: 0..NumberOfTypes. </li>
 <li>Modes: The available RouteMessage mode. Correct range in: 0..NumberOfModes. </li>
 </ul>
 	By reflection, the behaviours pool given a set of patterns P do:
 <pre>
  	For each pattern on P do
  		Mode = pattern.getMode();
  		Type = pattern.getType();
  		beh[Type * NumberOfModes + Mode] = pattern; 
      done;
  </pre>
 Moreover, Pattern's definiton provides additional specifiers:
 <ul>
 <li><b>Incoming RouteMessage's destination</b>: Local, Remote  and
  	Always. Local qualifier affects iff incoming messages for
      the local node. Hence, only behaviours for the local node
      may be matched. Remote qualifier affects iff messages for
      remote nodes. Hence, programmer must code behaviours which 
      alter the underlying overlay protocol when RouteMessages
      are destined to remote nodes. Always modifier is used as
      a wild card to ignore local or remote behaviour. </li>
 <li><b>Behaviours's role</b>: Bad, Good and Neutral. Bad qualifier
      alters only the behaviours from bad nodes. Good qualifier
      alters only the behaviours from good nodes and Neutral is
      a wild card used to ignore peer's behaviour.</li>
 </ul>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="ROLE_GOOD"><!-- --></A><H3>
ROLE_GOOD</H3>
<PRE>
protected static final int <B>ROLE_GOOD</B></PRE>
<DL>
<DD>Behaviour's Property: Good modifier for Behaviour's role. This means the behaviour
 qualified by this modifier only will be scheduled by good peers.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.ROLE_GOOD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="ROLE_BAD"><!-- --></A><H3>
ROLE_BAD</H3>
<PRE>
protected static final int <B>ROLE_BAD</B></PRE>
<DL>
<DD>Behaviour's Property: Bad modifier for Behaviour's role. This means the behaviour
 qualified by this modifier only will be scheduled by bad peers.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.ROLE_BAD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TRAFFIC_LOCAL"><!-- --></A><H3>
TRAFFIC_LOCAL</H3>
<PRE>
protected static final int <B>TRAFFIC_LOCAL</B></PRE>
<DL>
<DD>Behaviour's Property: Local modifier applied to a behaviour means it only will
 be scheduled when a RouteMessage has as destination the local node.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.TRAFFIC_LOCAL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TRAFFIC_REMOTE"><!-- --></A><H3>
TRAFFIC_REMOTE</H3>
<PRE>
protected static int <B>TRAFFIC_REMOTE</B></PRE>
<DL>
<DD>Behaviour's Property: Remote modifier applied to a behaviour means it only will
 be scheduled when a RouteMessage has as destination a remote node and needs to
 be rerouted trough the overlay again.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="filter"><!-- --></A><H3>
filter</H3>
<PRE>
protected <A HREF="../../../../planet/commonapi/behaviours/BehavioursFilter.html" title="interface in planet.commonapi.behaviours">BehavioursFilter</A> <B>filter</B></PRE>
<DL>
<DD>Filter instance.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="behSlots"><!-- --></A><H3>
behSlots</H3>
<PRE>
protected int <B>behSlots</B></PRE>
<DL>
<DD>Number of behaviour's slots: numberTypes * numberModes;
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="behaviours"><!-- --></A><H3>
behaviours</H3>
<PRE>
protected java.util.Vector <B>behaviours</B></PRE>
<DL>
<DD>Auxiliar Vector to use in the onMessage() method.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="behIt"><!-- --></A><H3>
behIt</H3>
<PRE>
protected java.util.Iterator <B>behIt</B></PRE>
<DL>
<DD>Auxiliar Iterator to use in the onMessage() method.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="TRAFFIC_ALWAYS_MASK"><!-- --></A><H3>
TRAFFIC_ALWAYS_MASK</H3>
<PRE>
protected static final int <B>TRAFFIC_ALWAYS_MASK</B></PRE>
<DL>
<DD>Behaviour's Property: Always modifier applied to a behaviour ignores the
 distinction between local or remote traffic handled by a node.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.TRAFFIC_ALWAYS_MASK">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="ROLE_NEUTRAL_MASK"><!-- --></A><H3>
ROLE_NEUTRAL_MASK</H3>
<PRE>
protected static final int <B>ROLE_NEUTRAL_MASK</B></PRE>
<DL>
<DD>Behaviour's Property: Neutral modifier applied to a behaviour ignores the
 distinction between local or remote traffic handled by a node.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.ROLE_NEUTRAL_MASK">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="NULL_MASK"><!-- --></A><H3>
NULL_MASK</H3>
<PRE>
protected static final int <B>NULL_MASK</B></PRE>
<DL>
<DD>Behaviour's Property: Lack Of Neutral and Always Mask.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.NULL_MASK">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="BEH_MAPPINGS"><!-- --></A><H3>
BEH_MAPPINGS</H3>
<PRE>
protected static final int <B>BEH_MAPPINGS</B></PRE>
<DL>
<DD>Total number of Behaviour's Queue: 
 <ol type="1" start="0">
 <li>Good and Local  Behaviours</li>
 <li>Good and Remote Behaviours</li>
 <li>Bad  and Local  Behaviours</li>
 <li>Bad  and Remote Behaviours</li>
 </ol>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#planet.generic.commonapi.behaviours.BehavioursPoolImpl.BEH_MAPPINGS">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="BehavioursPoolImpl()"><!-- --></A><H3>
BehavioursPoolImpl</H3>
<PRE>
public <B>BehavioursPoolImpl</B>()
                   throws <A HREF="../../../../planet/commonapi/exception/InitializationException.html" title="class in planet.commonapi.exception">InitializationException</A></PRE>
<DL>
<DD>Builds a non initialized pool. Requires the setValues(...) method
 invokation.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="whichQueues(int, int, int)"><!-- --></A><H3>
whichQueues</H3>
<PRE>
protected boolean[] <B>whichQueues</B>(int&nbsp;Mask,
                                int&nbsp;RoleOf,
                                int&nbsp;WhenTo)</PRE>
<DL>
<DD>The WhichQueue's method selects for a given pattern what Queues must
 include a copy of the current behaviour.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>Mask</CODE> - The Mask for Pattern.Always and Pattern.Neutral modifiers.<DD><CODE>RoleOf</CODE> - The Behaviour's Role for a <b>Good</b> or <b>Bad</b> peer.<DD><CODE>WhenTo</CODE> - Specifies Behaviour should be activated when incoming messages 
 refer to the local node or either when refer to a remote.
<DT><B>Returns:</B><DD>Which Behaviour's Queue must copy this behaviour.</DL>
</DD>
</DL>
<HR>

<A NAME="build(java.util.Vector)"><!-- --></A><H3>
build</H3>
<PRE>
protected void <B>build</B>(java.util.Vector&nbsp;patterns)
              throws <A HREF="../../../../planet/commonapi/exception/InitializationException.html" title="class in planet.commonapi.exception">InitializationException</A></PRE>
<DL>
<DD>Given the patterns sorted from more-to-less specific as input,
 builds a mapping from RouteMessage's patterns to behaviours.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>patterns</CODE> - The List of patterns.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../planet/commonapi/exception/InitializationException.html" title="class in planet.commonapi.exception">InitializationException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setPattern(int, int, java.lang.String, planet.generic.commonapi.behaviours.BehavioursPatternImpl)"><!-- --></A><H3>
setPattern</H3>
<PRE>
protected void <B>setPattern</B>(int&nbsp;queue,
                          int&nbsp;typePos,
                          java.lang.String&nbsp;modeOf,
                          <A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPatternImpl.html" title="class in planet.generic.commonapi.behaviours">BehavioursPatternImpl</A>&nbsp;pattern)
                   throws <A HREF="../../../../planet/commonapi/exception/InitializationException.html" title="class in planet.commonapi.exception">InitializationException</A></PRE>
<DL>
<DD>Given the initial position for type on mapping <b>typePos</b> and <b>mode</b> as input, sets the 
 pattern on the mapping taking into account the grammar tree extracted from wildcards semantics.
 Hence, the maximum number of mappings goes from <b>typePos</b> to <b>typePos + NumberOfModes</b>.
 For example, suppose type is QUERY_JOIN and modes are REQUEST and REPLY the maximun number of
 mappings to set is 2;
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>queue</CODE> - Identifies where to be queued the pattern.<DD><CODE>typePos</CODE> - Initial position on behaviours mapping array, i.e, [typePos..typePos + NumberOfModes]<DD><CODE>modeOf</CODE> - Mode of the pattern: Universal wildcard or '*', Complementary wildcard  or '?' and Tag.<DD><CODE>pattern</CODE> - Pattern to be treat.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../planet/commonapi/exception/InitializationException.html" title="class in planet.commonapi.exception">InitializationException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="prettyPrintAll()"><!-- --></A><H3>
prettyPrintAll</H3>
<PRE>
protected void <B>prettyPrintAll</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="printMap(int)"><!-- --></A><H3>
printMap</H3>
<PRE>
protected void <B>printMap</B>(int&nbsp;queue)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="onMessage(planet.commonapi.RouteMessage, planet.commonapi.Node)"><!-- --></A><H3>
onMessage</H3>
<PRE>
public void <B>onMessage</B>(<A HREF="../../../../planet/commonapi/RouteMessage.html" title="interface in planet.commonapi">RouteMessage</A>&nbsp;msg,
                      <A HREF="../../../../planet/commonapi/Node.html" title="interface in planet.commonapi">Node</A>&nbsp;node)
               throws <A HREF="../../../../planet/commonapi/behaviours/exception/NoSuchBehaviourException.html" title="class in planet.commonapi.behaviours.exception">NoSuchBehaviourException</A>,
                      <A HREF="../../../../planet/commonapi/behaviours/exception/NoBehaviourDispatchedException.html" title="class in planet.commonapi.behaviours.exception">NoBehaviourDispatchedException</A></PRE>
<DL>
<DD>Given a RouteMessage and a Node as input, onMessage's method intends to
 invoke some behaviours only if RouteMessage's type and mode fields matches
 some behaviour's pattern.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../planet/commonapi/behaviours/BehavioursPool.html#onMessage(planet.commonapi.RouteMessage, planet.commonapi.Node)">onMessage</A></CODE> in interface <CODE><A HREF="../../../../planet/commonapi/behaviours/BehavioursPool.html" title="interface in planet.commonapi.behaviours">BehavioursPool</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>msg</CODE> - RoteMessage taken as input.<DD><CODE>node</CODE> - Node taken as input.
<DT><B>Returns:</B><DD>Returns either an array of RouteMessages or null when no messages
 need to transmit this node.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../planet/commonapi/behaviours/exception/NoSuchBehaviourException.html" title="class in planet.commonapi.behaviours.exception">NoSuchBehaviourException</A></CODE> - when no behaviour matches RouteMessage's
 pattern.
<DD><CODE><A HREF="../../../../planet/commonapi/behaviours/exception/NoBehaviourDispatchedException.html" title="class in planet.commonapi.behaviours.exception">NoBehaviourDispatchedException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BehavioursPoolImpl.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPatternImpl.html" title="class in planet.generic.commonapi.behaviours"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../planet/generic/commonapi/behaviours/BehavioursPropertiesImpl.html" title="class in planet.generic.commonapi.behaviours"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BehavioursPoolImpl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
